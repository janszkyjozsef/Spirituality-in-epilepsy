<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>Epilepsy & Spirituality Study</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --green-dark: #0b3b2e;
            --green-mid: #2f8f5b;
            --green-light: #7fe3b2;

            --silver: #c9ced3;
            --silver-dark: #9aa3a8;

            --primary: var(--green-dark);
            --secondary: var(--green-mid);
            --accent: var(--silver);
            --success: #1f6f4a;
            --light: #f6faf8;
            --dark: #101412;
            --text-muted: #6a7470;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background:
            radial-gradient(1000px 500px at 20% 0%, rgba(47, 143, 91, 0.14), transparent 55%),
            radial-gradient(900px 450px at 90% 10%, rgba(201, 206, 211, 0.35), transparent 60%),
            #eef2ef;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .lang-switch {
            background: rgba(255,255,255,0.2);
            border: 1px solid white;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        .lang-switch:hover {
            background: rgba(255,255,255,0.4);
        }

        .authors-toggle {
            font-size: 0.9rem;
            text-decoration: underline;
            cursor: pointer;
            opacity: 0.9;
            margin-top: 10px;
            display: inline-block;
        }

        .authors-list {
            display: none;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.85rem;
            line-height: 1.5;
            max-width: 600px;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 15px;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
        }

        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
        }

        .card {
            background: rgba(255, 255, 255, 0.94);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(201, 206, 211, 0.65);
            box-shadow: 0 8px 24px rgba(0,0,0,0.06);
            transition: transform 0.2s;
            backdrop-filter: blur(6px);
        }

        .card:hover { transform: translateY(-2px); }

        h2 { 
            color: var(--primary); 
            border-left: 5px solid var(--secondary); 
            padding-left: 10px; 
            margin-top: 0; 
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(246,250,248,0.88));
            padding: 20px 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(201, 206, 211, 0.55);
            border-bottom: 3px solid var(--secondary);
        }
        
        .stat-value { font-size: 2rem; font-weight: bold; color: var(--primary); }
        .stat-label { font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; margin-top: 5px; }

        .simulator {
            background: rgba(201, 206, 211, 0.22);
            border: 1px solid rgba(201, 206, 211, 0.55);
        }
        
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group select { 
            width: 100%; 
            padding: 10px; 
            border-radius: 6px; 
            border: 1px solid #ccc;
            background: white;
        }

        .result-meter {
            height: 25px;
            background: #dcdcdc;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
        }
        
        .result-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            width: 0%;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .prediction-text {
            text-align: center;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .glossary-item {
            border-bottom: 1px solid #eee;
            padding: 12px 0;
        }
        .glossary-item:last-child { border-bottom: none; }
        .glossary-term { font-weight: bold; color: var(--secondary); cursor: help; font-size: 1.1rem; }
        
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid #e1e4e8;
            margin-top: 2rem;
        }
    
        .header-actions {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }

        @media (min-width: 901px) {
            .header-actions { flex-direction: row; align-items: center; }
        }

        .profile-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: 999px;
            font-weight: 700;
            letter-spacing: 0.2px;
            text-decoration: none;
            color: white;
            background: rgba(201, 206, 211, 0.18);
            border: 1px solid rgba(255, 255, 255, 0.65);
            box-shadow: 0 10px 24px rgba(0,0,0,0.12);
            transition: transform 0.2s ease, background 0.2s ease, border-color 0.2s ease;
        }

        .profile-btn:hover {
            transform: translateY(-1px);
            background: rgba(201, 206, 211, 0.28);
            border-color: rgba(255, 255, 255, 0.8);
        }

        .profile-btn:active { transform: translateY(0px); }

        .lang-switch {
            border-color: rgba(255,255,255,0.65);
        }

        .visuals-section {
            max-width: 1200px;
            margin: 0 auto 2rem;
            padding: 0 15px;
        }

        .visuals-inner {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .visual-img {
            width: 100%;
            height: auto;
            border-radius: 14px;
            border: 1px solid rgba(201, 206, 211, 0.75);
            box-shadow: 0 10px 26px rgba(0,0,0,0.10);
            background: rgba(255,255,255,0.92);
        }


        .video-card {
            width: 100%;
            border-radius: 14px;
            border: 1px solid rgba(201, 206, 211, 0.75);
            box-shadow: 0 10px 26px rgba(0,0,0,0.10);
            background: rgba(255,255,255,0.94);
            overflow: hidden;
        }

        .video-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #000;
        }

        .video-wrapper iframe {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Fallback for older browsers without aspect-ratio */
        @supports not (aspect-ratio: 16 / 9) {
            .video-wrapper {
                height: 0;
                padding-bottom: 56.25%;
            }
        }

    </style>
</head>
<body>

<header>
    <div class="header-content">
        <div>
            <h1 id="title">Spiritualit√°s az Epilepszi√°ban</h1>
            <p id="subtitle">A magyar kutat√°s interakt√≠v adatvizualiz√°ci√≥ja</p>
            <div class="authors-toggle" onclick="toggleAuthors()" id="authorsBtn">Szerz≈ëk mutat√°sa ‚ñº</div>
            <div class="authors-list" id="authorsList">
                <strong>Szerz≈ëk / Authors:</strong> J√≥zsef Janszky jr., Dalma T√©nyi, R√©ka Horv√°th, Csilla Gyimesi, Be√°ta B√≥n√©, M√°rton T√≥th, Zolt√°n V√∂r√∂s, Norbert Kov√°cs, J√≥zsef Janszky, Tam√°s T√©nyi.<br>
                <em>University of P√©cs / P√©csi Tudom√°nyegyetem</em>
            </div>
        </div>
        <div class="header-actions">
            <a class="profile-btn" href="https://janszkyjozsef.github.io/Ifj.-Janszky-J-zsef-Profil/">Vissza Ifj. Janszky J√≥zsef Profilj√°ra</a>
            <button class="lang-switch" onclick="toggleLang()">üá≠üá∫ HU / üá¨üáß EN</button>
        </div>
    </div>
</header>

<div class="container">
    <div class="main-col">
        <div class="stat-grid">
            <div class="stat-box">
                <div class="stat-value">129</div>
                <div class="stat-label" data-i18n="stat_patients">Betegsz√°m</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">1.86</div>
                <div class="stat-label" data-i18n="stat_inspirit">√Åtlag INSPIRIT-R pont</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">30.2%</div>
                <div class="stat-label" data-i18n="stat_nonreligious">Egy√°ltal√°n nem vall√°sos</div>
            </div>
        </div>

        <div class="card">
            <h2 data-i18n="chart_title_global">Glob√°lis Kontextus</h2>
            <p data-i18n="chart_desc_global">A magyar betegek spiritualit√°si szintj√©nek √∂sszehasonl√≠t√°sa nemzetk√∂zi adatokkal.</p>
            <canvas id="countryChart" height="140"></canvas>
        </div>

        <div class="card">
            <h2 data-i18n="chart_title_clinical">Klinikai √ñsszef√ºgg√©sek</h2>
            <p data-i18n="chart_desc_clinical">A magas spiritualit√°s ar√°nya az egyes klinikai alcsoportokban.</p>
            <canvas id="clinicalChart" height="140"></canvas>
        </div>

        <div class="card">
            <h2 data-i18n="glossary_title">Orvosi Fogalomt√°r</h2>
            <div class="glossary-item">
                <span class="glossary-term" data-i18n="term_aura">Izol√°lt Aura</span>
                <p data-i18n="def_aura">Olyan fok√°lis roham, amely szubjekt√≠v √©rzetekben nyilv√°nul meg (pl. d√©j√† vu, gyomort√°ji √©rz√©s), de nem torkollik r√°ng√≥g√∂rcsbe. A kutat√°s szerint ez szignifik√°nsan n√∂veli a spiritualit√°st.</p>
            </div>
            <div class="glossary-item">
                <span class="glossary-term">INSPIRIT-R</span>
                <p data-i18n="def_inspirit">A spiritu√°lis √©lm√©nyek m√©r√©s√©re szolg√°l√≥, nemzetk√∂zileg valid√°lt standardiz√°lt k√©rd≈ë√≠v (Index of Core Spiritual Experiences).</p>
            </div>
        </div>
    </div>

    <div class="side-col">
        <div class="card simulator">
            <h2 data-i18n="sim_title">Predikci√≥ Kalkul√°tor</h2>
            <p data-i18n="sim_desc">Sz√°molja ki a magas spiritualit√°s val√≥sz√≠n≈±s√©g√©t a tanulm√°ny logisztikus regresszi√≥s es√©lyh√°nyadosai (OR) alapj√°n.</p>
            
            <div class="form-group">
                <label data-i18n="label_income">Havi J√∂vedelem</label>
                <select id="incomeInput" onchange="calculateProbability()">
                    <option value="high" data-i18n="opt_high_inc">Magas (>250.000 Ft)</option>
                    <option value="low" data-i18n="opt_low_inc">Alacsony (<250.000 Ft) [OR 3.5]</option>
                </select>
            </div>

            <div class="form-group">
                <label data-i18n="label_seizure">Roham√°llapot</label>
                <select id="seizureInput" onchange="calculateProbability()">
                    <option value="active" data-i18n="opt_active">Akt√≠v rohamok</option>
                    <option value="free" data-i18n="opt_free">Rohammentes (>1 √©v) [OR 2.8]</option>
                </select>
            </div>

            <div class="form-group">
                <label data-i18n="label_aura">Aura T√≠pus</label>
                <select id="auraInput" onchange="calculateProbability()">
                    <option value="none" data-i18n="opt_no_aura">Nincs / Nem izol√°lt</option>
                    <option value="isolated" data-i18n="opt_iso_aura">Izol√°lt Aur√°k [OR 3.0]</option>
                </select>
            </div>

            <div class="result-meter">
                <div class="result-fill" id="probBar"></div>
            </div>
            <div class="prediction-text" id="probText">Alap√©rtelmezett Es√©ly</div>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #ccc;">
            <small style="display:block; color:#666; font-style: italic;" data-i18n="sim_note">
                *A modell a tanulm√°ny t√∂bbv√°ltoz√≥s regresszi√≥j√°ra √©p√ºl: Alacsony j√∂vedelem (OR: 3.5), Rohammentess√©g (OR: 2.8), Izol√°lt aura (OR: 3.0).
            </small>
        </div>

        <div class="card">
            <h2 data-i18n="insight_title">F≈ëbb Felismer√©sek</h2>
            <ul style="padding-left: 20px; line-height: 1.6;">
                <li data-i18n="insight_1">A magyar betegek spiritualit√°si pontsz√°ma sokkal alacsonyabb, mint m√°s orsz√°gok√©, ami a t√°rsadalom szekulariz√°ci√≥j√°t t√ºkr√∂zi.</li>
                <li style="margin-top:12px;" data-i18n="insight_2"><strong>Klinikai paradoxon:</strong> A viszonylag enyh√©bb lefoly√°s√∫ epilepszia (rohammentess√©g, izol√°lt aur√°k megl√©te) paradox m√≥don MAGASABB spiritualit√°ssal p√°rosul.</li>
                <li style="margin-top:12px;" data-i18n="insight_3">A vall√°si hovatartoz√°s √©s a pszichi√°triai t√°rsbetegs√©gek nem bizonyultak szignifik√°ns prediktornak.</li>
            </ul>
        </div>
    </div>
</div>


<section class="visuals-section">
    <div class="visuals-inner">
        
        <div class="video-card">
            <div class="video-wrapper">
                <iframe
                    src="https://www.youtube-nocookie.com/embed/1uLZghqTt8Q?rel=0&modestbranding=1"
                    title="YouTube video"
                    loading="lazy"
                    referrerpolicy="strict-origin-when-cross-origin"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
            </div>
            <div style="padding: 10px 14px; font-size: 0.92rem; color: var(--text-muted);">
                Ha a be√°gyazott lej√°tsz√≥ n√©ha hib√°zik (YouTube "Error 153"),
                <a href="https://youtu.be/1uLZghqTt8Q" target="_blank" rel="noopener noreferrer" style="color: var(--secondary); font-weight: 700;">
                    nyisd meg YouTube-on
                </a>.
            </div>
        </div>
        <img src="NotebookLM_Mind_Map_HURELIG.png" class="visual-img" alt="Mind map vizualiz√°ci√≥">
        <img src="NBLMSPRIT.png" class="visual-img" alt="Tanulm√°ny √∂sszefoglal√≥ infografika">
    </div>
</section>

<footer>
    <p>Based on the study: <em>Spirituality in epilepsy - A Hungarian study</em>. Epilepsy & Behavior.<br>
    Interactive data visualization for educational and review purposes.</p>
</footer>

<script>
    let currentLang = 'hu';
    let countryChart, clinicalChart;
    
    const translations = {
        en: {
            title: "Spirituality in Epilepsy",
            subtitle: "Interactive Data Visualization of the Hungarian Study",
            authorsBtn: "Show Authors ‚ñº",
            authorsBtnHide: "Hide Authors ‚ñ≤",
            stat_patients: "Patients",
            stat_inspirit: "Avg. INSPIRIT-R Score",
            stat_nonreligious: "Not Religious at all",
            chart_title_global: "Global Context",
            chart_desc_global: "Comparing the average spirituality scores of Hungarian patients with international data.",
            chart_title_clinical: "Clinical Correlations",
            chart_desc_clinical: "Percentage of patients with High Spirituality in specific subgroups.",
            glossary_title: "Medical Glossary",
            term_aura: "Isolated Aura",
            def_aura: "A focal seizure manifesting as subjective sensations (e.g., d√©j√† vu, abdominal rising) without progressing to a convulsive seizure. Significantly linked to higher spirituality.",
            def_inspirit: "INSPIRIT-R: Index of Core Spiritual Experiences. A standardized questionnaire used internationally.",
            sim_title: "Predictor Calculator",
            sim_desc: "Calculate the likelihood of high spirituality based on the study's Logistic Regression Odds Ratios (OR).",
            label_income: "Monthly Income",
            opt_high_inc: "High (>250k HUF)",
            opt_low_inc: "Low (<250k HUF) [OR 3.5]",
            label_seizure: "Seizure Status",
            opt_active: "Active Seizures",
            opt_free: "Seizure Free (>1 yr) [OR 2.8]",
            label_aura: "Aura Type",
            opt_no_aura: "No / Non-isolated",
            opt_iso_aura: "Isolated Auras [OR 3.0]",
            sim_note: "*Based on multivariate regression: Low Income (OR 3.5), Seizure Freedom (OR 2.8), Isolated Aura (OR 3.0).",
            insight_title: "Key Insights",
            insight_1: "Hungarian patients show significantly lower spirituality compared to other countries, reflecting societal secularization.",
            insight_2: "<strong>Clinical Paradox:</strong> Milder epilepsy courses (seizure freedom, isolated auras) paradoxically align with HIGHER spirituality.",
            insight_3: "Formal religious affiliation and psychiatric comorbidities were not significant predictors.",
            prob_low: "Low Probability",
            prob_med: "Increased Probability",
            prob_high: "High Probability",
            prob_very_high: "Very High Probability",
            chart_label_countries: "INSPIRIT-R Score",
            chart_label_clin: "% High Spirituality"
        },
        hu: {
            title: "Spiritualit√°s az Epilepszi√°ban",
            subtitle: "A magyar kutat√°s interakt√≠v adatvizualiz√°ci√≥ja",
            authorsBtn: "Szerz≈ëk mutat√°sa ‚ñº",
            authorsBtnHide: "Szerz≈ëk elrejt√©se ‚ñ≤",
            stat_patients: "Betegsz√°m",
            stat_inspirit: "√Åtlag INSPIRIT-R pont",
            stat_nonreligious: "Egy√°ltal√°n nem vall√°sos",
            chart_title_global: "Glob√°lis Kontextus",
            chart_desc_global: "A magyar betegek spiritualit√°si szintj√©nek √∂sszehasonl√≠t√°sa nemzetk√∂zi adatokkal.",
            chart_title_clinical: "Klinikai √ñsszef√ºgg√©sek",
            chart_desc_clinical: "A magas spiritualit√°s ar√°nya az egyes klinikai alcsoportokban.",
            glossary_title: "Orvosi Fogalomt√°r",
            term_aura: "Izol√°lt Aura",
            def_aura: "Olyan fok√°lis roham, amely szubjekt√≠v √©rzetekben nyilv√°nul meg (pl. d√©j√† vu, gyomort√°ji √©rz√©s), de nem torkollik r√°ng√≥g√∂rcsbe. A kutat√°s szerint ez szignifik√°nsan n√∂veli a spiritualit√°st.",
            def_inspirit: "A spiritu√°lis √©lm√©nyek m√©r√©s√©re szolg√°l√≥, nemzetk√∂zileg valid√°lt standardiz√°lt k√©rd≈ë√≠v (Index of Core Spiritual Experiences).",
            sim_title: "Predikci√≥ Kalkul√°tor",
            sim_desc: "Sz√°molja ki a magas spiritualit√°s val√≥sz√≠n≈±s√©g√©t a tanulm√°ny logisztikus regresszi√≥s es√©lyh√°nyadosai (OR) alapj√°n.",
            label_income: "Havi J√∂vedelem",
            opt_high_inc: "Magas (>250.000 Ft)",
            opt_low_inc: "Alacsony (<250.000 Ft) [OR 3.5]",
            label_seizure: "Roham√°llapot",
            opt_active: "Akt√≠v rohamok",
            opt_free: "Rohammentes (>1 √©v) [OR 2.8]",
            label_aura: "Aura T√≠pus",
            opt_no_aura: "Nincs / Nem izol√°lt",
            opt_iso_aura: "Izol√°lt Aur√°k [OR 3.0]",
            sim_note: "*A modell a tanulm√°ny t√∂bbv√°ltoz√≥s regresszi√≥j√°ra √©p√ºl: Alacsony j√∂vedelem (OR: 3.5), Rohammentess√©g (OR: 2.8), Izol√°lt aura (OR: 3.0).",
            insight_title: "F≈ëbb Felismer√©sek",
            insight_1: "A magyar betegek spiritualit√°si pontsz√°ma sokkal alacsonyabb, mint m√°s orsz√°gok√©, ami a t√°rsadalom szekulariz√°ci√≥j√°t t√ºkr√∂zi.",
            insight_2: "<strong>Klinikai paradoxon:</strong> A viszonylag enyh√©bb lefoly√°s√∫ epilepszia (rohammentess√©g, izol√°lt aur√°k megl√©te) paradox m√≥don MAGASABB spiritualit√°ssal p√°rosul.",
            insight_3: "A vall√°si hovatartoz√°s √©s a pszichi√°triai t√°rsbetegs√©gek nem bizonyultak szignifik√°ns prediktornak.",
            prob_low: "Alacsony Val√≥sz√≠n≈±s√©g",
            prob_med: "Emelkedett Val√≥sz√≠n≈±s√©g",
            prob_high: "Magas Val√≥sz√≠n≈±s√©g",
            prob_very_high: "Nagyon Magas Val√≥sz√≠n≈±s√©g",
            chart_label_countries: "INSPIRIT-R Pontsz√°m",
            chart_label_clin: "% Magas Spiritualit√°s"
        }
    };

    function initCharts() {
        const ctxCountry = document.getElementById('countryChart').getContext('2d');
        countryChart = new Chart(ctxCountry, {
            type: 'bar',
            data: {
                labels: ['Magyarorsz√°g', 'Litv√°nia', 'USA (Kr√≥nikus)', 'Braz√≠lia'],
                datasets: [{
                    label: translations[currentLang].chart_label_countries,
                    data: [1.86, 2.45, 2.8, 3.11],
                    backgroundColor: ['#1f6f4a', '#2f8f5b', '#7fe3b2', '#c9ced3'],
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, max: 4 } }
            }
        });

        const ctxClin = document.getElementById('clinicalChart').getContext('2d');
        clinicalChart = new Chart(ctxClin, {
            type: 'bar',
            data: {
                labels: ['Rohammentes', 'Nem rohammentes', 'Izol√°lt Aura', 'Nincs I. Aura'],
                datasets: [{
                    label: translations[currentLang].chart_label_clin,
                    data: [57, 34, 39, 22],
                    backgroundColor: ['#2f8f5b', '#c9ced3', '#1f6f4a', '#c9ced3'],
                    borderRadius: 6
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, max: 100 } }
            }
        });
    }

    function toggleAuthors() {
        const list = document.getElementById('authorsList');
        const btn = document.getElementById('authorsBtn');
        const t = translations[currentLang];

        const isHidden = getComputedStyle(list).display === 'none';
        if (!isHidden) {
            list.style.display = 'none';
            btn.innerHTML = t.authorsBtn;
        } else {
            list.style.display = 'block';
            btn.innerHTML = t.authorsBtnHide;
        }
    }

    function toggleLang() {
        currentLang = currentLang === 'en' ? 'hu' : 'en';
        updateDOM();
    }

    function updateDOM() {
        const t = translations[currentLang];
        
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[key]) el.innerHTML = t[key];
        });

        document.getElementById('title').textContent = t.title;
        document.getElementById('subtitle').textContent = t.subtitle;
        
        countryChart.data.labels = currentLang === 'en' ? 
            ['Hungary', 'Lithuania', 'USA', 'Brazil'] : 
            ['Magyarorsz√°g', 'Litv√°nia', 'USA', 'Braz√≠lia'];
        countryChart.data.datasets[0].label = t.chart_label_countries;
        countryChart.update();

        clinicalChart.data.labels = currentLang === 'en' ?
            ['Seizure Free', 'Not Seizure Free', 'Isolated Aura', 'No Isolated Aura'] :
            ['Rohammentes', 'Nem rohammentes', 'Izol√°lt Aura', 'Nincs I. Aura'];
        clinicalChart.data.datasets[0].label = t.chart_label_clin;
        clinicalChart.update();

        calculateProbability();
        
        const list = document.getElementById('authorsList');
        const isHidden = getComputedStyle(list).display === 'none';
        document.getElementById('authorsBtn').innerHTML = isHidden ? t.authorsBtn : t.authorsBtnHide;
    }

    function calculateProbability() {
        const t = translations[currentLang];
        const income = document.getElementById('incomeInput').value;
        const seizure = document.getElementById('seizureInput').value;
        const aura = document.getElementById('auraInput').value;

        let score = 0;
        let maxScore = 3;

        if (income === 'low') score += 1;
        if (seizure === 'free') score += 1;
        if (aura === 'isolated') score += 1;

        const percentage = (score / maxScore) * 100;
        const bar = document.getElementById('probBar');
        bar.style.width = (percentage === 0 ? 5 : percentage) + "%";

        const textEl = document.getElementById('probText');
        if (score === 0) {
            textEl.textContent = t.prob_low;
            bar.style.background = "linear-gradient(90deg, var(--silver), var(--silver-dark))";
        } else if (score === 1) {
            textEl.textContent = t.prob_med;
            bar.style.background = "linear-gradient(90deg, var(--green-light), var(--secondary))";
        } else if (score === 2) {
            textEl.textContent = t.prob_high;
            bar.style.background = "linear-gradient(90deg, var(--secondary), var(--success))";
        } else {
            textEl.textContent = t.prob_very_high;
            bar.style.background = "linear-gradient(90deg, var(--success), var(--primary))";
        }
    }

    window.onload = function() {
        initCharts();
        calculateProbability();
    };
</script>

</body>
</html>